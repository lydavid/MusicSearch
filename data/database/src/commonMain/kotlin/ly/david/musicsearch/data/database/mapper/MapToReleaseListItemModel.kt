package ly.david.musicsearch.data.database.mapper

import ly.david.musicsearch.shared.domain.image.ImageId
import ly.david.musicsearch.shared.domain.listitem.ReleaseListItemModel
import ly.david.musicsearch.shared.domain.release.CoverArtArchiveUiModel
import ly.david.musicsearch.shared.domain.release.TextRepresentationUiModel

// Although SQLDelight generates models for us, their types are based on the function names.
internal fun mapToReleaseListItemModel(
    id: String,
    name: String,
    disambiguation: String,
    date: String,
    barcode: String?,
    asin: String?,
    quality: String?,
    countryCode: String?,
    status: String?,
    statusId: String?,
    packaging: String?,
    packagingId: String?,
    script: String?,
    language: String?,
    coverArtCount: Int,
    formattedArtistCreditNames: String?,
    thumbnailUrl: String?,
    imageId: Long?,
    releaseCountryCount: Long,
    visited: Boolean?,
    collected: Boolean?,
    aliasNames: String?,
    aliasLocales: String?,
) = ReleaseListItemModel(
    id = id,
    name = name,
    disambiguation = disambiguation,
    date = date,
    barcode = barcode,
    asin = asin,
    quality = quality,
    countryCode = countryCode,
    status = status,
    statusId = statusId,
    packaging = packaging,
    packagingId = packagingId,
    textRepresentation = TextRepresentationUiModel(
        script = script,
        language = language,
    ),
    coverArtArchive = CoverArtArchiveUiModel(
        count = coverArtCount,
    ),
    formattedArtistCredits = formattedArtistCreditNames,
    imageUrl = thumbnailUrl,
    imageId = imageId?.let { ImageId(it) },
    releaseCountryCount = releaseCountryCount.toInt(),
    visited = visited == true,
    collected = collected == true,
    aliases = combineToAliases(aliasNames, aliasLocales),
)

/**
 * With [catalogNumber].
 */
internal fun mapToReleaseListItemModel(
    id: String,
    name: String,
    disambiguation: String,
    date: String,
    barcode: String?,
    asin: String?,
    quality: String?,
    countryCode: String?,
    status: String?,
    statusId: String?,
    packaging: String?,
    packagingId: String?,
    script: String?,
    language: String?,
    coverArtCount: Int,
    catalogNumber: String?,
    formattedArtistCreditNames: String,
    thumbnailUrl: String?,
    imageId: Long?,
    releaseCountryCount: Long,
    visited: Boolean?,
    collected: Boolean?,
    aliasNames: String?,
    aliasLocales: String?,
) = ReleaseListItemModel(
    id = id,
    name = name,
    disambiguation = disambiguation,
    date = date,
    barcode = barcode,
    asin = asin,
    quality = quality,
    countryCode = countryCode,
    status = status,
    statusId = statusId,
    packaging = packaging,
    packagingId = packagingId,
    textRepresentation = TextRepresentationUiModel(
        script = script,
        language = language,
    ),
    coverArtArchive = CoverArtArchiveUiModel(
        count = coverArtCount,
    ),
    catalogNumbers = catalogNumber,
    formattedArtistCredits = formattedArtistCreditNames,
    imageUrl = thumbnailUrl,
    imageId = imageId?.let { ImageId(it) },
    releaseCountryCount = releaseCountryCount.toInt(),
    visited = visited == true,
    collected = collected == true,
    aliases = combineToAliases(aliasNames, aliasLocales),
)
